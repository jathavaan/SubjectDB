{% extends 'base.html' %}
{% block title %}Subject{% endblock %}

{% block navbar_links %}
<li>
    <a href="{{url_for('user.subjects')}}">Subjects</a>
</li>
<li>
    <a href="{{url_for('user.profile')}}">Profile</a>
</li>
{% endblock %}

{% block greeting %}
<div class="small-greeting">
    <h1>Welcome, {{session['first_name']}} {{session['surname']}}</h1>

    <div class="message">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <p>{{message}}</p>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
</div>
{% endblock %}

{% block content %}
<h1>Subjects</h1>
<div class="controls">
    <form method="post">
        <input type="text" name="search-query" minlength="3" placeholder="Search">
        <input type="submit" value="Search">
    </form>

    <a class="control-link" href="#">Edit</a>
    <a class="control-link" href="{{url_for('user.add_subject')}}">Add</a>
    <a class="control-link" href="#">Delete</a>
</div>

<table>
    <tr>
        <th>Subject code</th>
        <th>Subject name</th>
        <th>Grade</th>
        <th></th>
    </tr>
    {% for user_subject in subjects %}
        {% set link, user, subject, grade = user_subject %}
        <tr>
            <td>{{subject.subject_code}}</td>
            <td>{{subject.subject_name}}</td>
            <td>{{grade.grade_value}}</td>
            <td>
                <form method="post" action="#">
                    <input type="submit" name="" class="edit-btn" value="Edit">
                </form>
            </td>
        </tr>
    {% endfor %}
</table>
{% endblock %}

